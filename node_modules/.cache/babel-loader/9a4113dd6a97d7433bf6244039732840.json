{"ast":null,"code":"import _classCallCheck from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{withRouter}from\"react-router-dom\";import{setResetPassword,resetPassword}from\"../../actions\";import{newUserDataState}from\"../../actions/types\";import Alert from\"react-bootstrap/Alert\";import spinner from\"../spinner.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Resetpassword=/*#__PURE__*/function(_React$Component){_inherits(Resetpassword,_React$Component);var _super=_createSuper(Resetpassword);function Resetpassword(){var _this;_classCallCheck(this,Resetpassword);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onSubmit=function(event){event.preventDefault();if(_this.props.resetPasswordData.state===\"submitting\")return;var resetPasswordData=_this.props.resetPasswordData;if(resetPasswordData.password.length<12)return _this.props.setResetPassword(true,resetPasswordData.password,resetPasswordData.confirmPassword,newUserDataState.lengthValidation);if(resetPasswordData.password!==resetPasswordData.confirmPassword)return _this.props.setResetPassword(true,resetPasswordData.password,resetPasswordData.confirmPassword,newUserDataState.unmatchedValidation);_this.props.resetPassword(_this.props.match.params.token);};_this.onInputFieldChange=function(event,field){switch(field){case\"password\":_this.props.setResetPassword(true,event.target.value,_this.props.resetPasswordData.confirmPassword,\"typing\");break;case\"confirmPassword\":_this.props.setResetPassword(true,_this.props.resetPasswordData.password,event.target.value,\"typing\");break;default:_this.props.setResetPassword(true,_this.props.resetPasswordData.password,_this.props.resetPasswordData.confirmPassword,\"typing\");}};return _this;}_createClass(Resetpassword,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.setResetPassword(true,\"\",\"\",\"empty\");}},{key:\"render\",value:function render(){var _this2=this;if(!this.props.resetPasswordData)return\"\";var validation=this.props.resetPasswordData.state.startsWith(\"validation\");var invalidToken=this.props.resetPasswordData.state===newUserDataState.invalidToken;var failedMessage;if(validation){failedMessage=this.props.resetPasswordData.state.split(\",\")[1];}else if(invalidToken){failedMessage=\"Something went wrong ! Maybe token is invalid or has expired.\";}return/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"signup-warning\",children:/*#__PURE__*/_jsx(Alert,{show:validation||invalidToken,variant:\"danger\",children:/*#__PURE__*/_jsx(\"p\",{children:failedMessage})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"form__heading\",children:\"Reset Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form__fieldsWrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"New password\",required:true,autoFocus:true,value:this.props.resetPasswordData.password,onChange:function onChange(event){return _this2.onInputFieldChange(event,\"password\");}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Confirm password\",required:true,value:this.props.resetPasswordData.confirmPassword,onChange:function onChange(event){return _this2.onInputFieldChange(event,\"confirmPassword\");}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__submitBtn\",children:this.props.resetPasswordData.state===newUserDataState.submitting?/*#__PURE__*/_jsx(\"img\",{className:\"icon-spinner\",src:spinner,alt:\"spinner icon svg\"}):\"Update\"})]});}}]);return Resetpassword;}(React.Component);var mapStateToProps=function mapStateToProps(_ref){var resetPasswordData=_ref.resetPasswordData;return{resetPasswordData:resetPasswordData};};export default withRouter(connect(mapStateToProps,{setResetPassword:setResetPassword,resetPassword:resetPassword})(Resetpassword));","map":{"version":3,"sources":["C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/src/components/AuthComponent/Resetpassword.jsx"],"names":["React","connect","withRouter","setResetPassword","resetPassword","newUserDataState","Alert","Resetpassword","onSubmit","event","preventDefault","props","resetPasswordData","state","password","length","confirmPassword","lengthValidation","unmatchedValidation","match","params","token","onInputFieldChange","field","target","value","validation","startsWith","invalidToken","failedMessage","split","submitting","spinner","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport { setResetPassword, resetPassword } from \"../../actions\";\r\nimport { newUserDataState } from \"../../actions/types\";\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport spinner from \"../spinner.svg\";\r\n\r\nclass Resetpassword extends React.Component {\r\n  onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (this.props.resetPasswordData.state === \"submitting\") return;\r\n\r\n    const { resetPasswordData } = this.props;\r\n\r\n    if (resetPasswordData.password.length < 12)\r\n      return this.props.setResetPassword(\r\n        true,\r\n        resetPasswordData.password,\r\n        resetPasswordData.confirmPassword,\r\n        newUserDataState.lengthValidation\r\n      );\r\n\r\n    if (resetPasswordData.password !== resetPasswordData.confirmPassword)\r\n      return this.props.setResetPassword(\r\n        true,\r\n        resetPasswordData.password,\r\n        resetPasswordData.confirmPassword,\r\n        newUserDataState.unmatchedValidation\r\n      );\r\n\r\n    this.props.resetPassword(this.props.match.params.token);\r\n  };\r\n\r\n  onInputFieldChange = (event, field) => {\r\n    switch (field) {\r\n      case \"password\":\r\n        this.props.setResetPassword(\r\n          true,\r\n          event.target.value,\r\n          this.props.resetPasswordData.confirmPassword,\r\n          \"typing\"\r\n        );\r\n        break;\r\n      case \"confirmPassword\":\r\n        this.props.setResetPassword(\r\n          true,\r\n          this.props.resetPasswordData.password,\r\n          event.target.value,\r\n          \"typing\"\r\n        );\r\n        break;\r\n      default:\r\n        this.props.setResetPassword(\r\n          true,\r\n          this.props.resetPasswordData.password,\r\n          this.props.resetPasswordData.confirmPassword,\r\n          \"typing\"\r\n        );\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.setResetPassword(true, \"\", \"\", \"empty\");\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.resetPasswordData) return \"\";\r\n\r\n    const validation = this.props.resetPasswordData.state.startsWith(\r\n      \"validation\"\r\n    );\r\n    const invalidToken =\r\n      this.props.resetPasswordData.state === newUserDataState.invalidToken;\r\n\r\n    let failedMessage;\r\n    if (validation) {\r\n      failedMessage = this.props.resetPasswordData.state.split(\",\")[1];\r\n    } else if (invalidToken) {\r\n      failedMessage =\r\n        \"Something went wrong ! Maybe token is invalid or has expired.\";\r\n    }\r\n\r\n    return (\r\n      <form className=\"form\" onSubmit={this.onSubmit}>\r\n        <div className=\"signup-warning\">\r\n          <Alert show={validation || invalidToken} variant=\"danger\">\r\n            <p>{failedMessage}</p>\r\n          </Alert>\r\n        </div>\r\n\r\n        <h2 className=\"form__heading\">Reset Password</h2>\r\n\r\n        <div className=\"form__fieldsWrapper\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"New password\"\r\n            required\r\n            autoFocus\r\n            value={this.props.resetPasswordData.password}\r\n            onChange={(event) => this.onInputFieldChange(event, \"password\")}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Confirm password\"\r\n            required\r\n            value={this.props.resetPasswordData.confirmPassword}\r\n            onChange={(event) =>\r\n              this.onInputFieldChange(event, \"confirmPassword\")\r\n            }\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"form__submitBtn\">\r\n          {this.props.resetPasswordData.state ===\r\n          newUserDataState.submitting ? (\r\n            <img\r\n              className=\"icon-spinner\"\r\n              src={spinner}\r\n              alt=\"spinner icon svg\"\r\n            />\r\n          ) : (\r\n            \"Update\"\r\n          )}\r\n        </button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ resetPasswordData }) => {\r\n  return { resetPasswordData };\r\n};\r\n\r\nexport default withRouter(\r\n  connect(mapStateToProps, { setResetPassword, resetPassword })(Resetpassword)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}