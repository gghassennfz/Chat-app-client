{"ast":null,"code":"import _classCallCheck from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Link}from\"react-router-dom\";import{setProfileData,saveProfileData,deleteAccount,logout}from\"../../actions\";import{conversations,login}from\"../../utils/Routes\";import ProfileBar from\"../ProfileBar\";import defaultAvatar from\"../avatar.svg\";import Alert from\"react-bootstrap/Alert\";import spinner from\"../spinner.svg\";import\"./Profile.scss\";import history from\"../../utils/history\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var index=/*#__PURE__*/function(_Component){_inherits(index,_Component);var _super=_createSuper(index);function index(){var _this;_classCallCheck(this,index);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={deleteAccountModal:false,deleteAccountLoading:false};_this.profileAvatar=/*#__PURE__*/React.createRef();_this.setDeleteAccountModal=function(){_this.setState({deleteAccountModal:!_this.state.deleteAccountModal});};_this.onFieldChange=function(event,field){var profileData=_this.props.profileData;if(field===\"username\"){_this.props.setProfileData(event.target.value,profileData.email);}else if(field===\"email\"){_this.props.setProfileData(profileData.username,event.target.value);}else if(field===\"avatar\"){var reader=new FileReader();reader.readAsDataURL(event.target.files[0]);reader.onload=function(event){_this.profileAvatar.current.src=event.target.result;};}};_this.onSubmit=function(event){event.preventDefault();if(_this.props.profileData.state!==\"saving\"){_this.props.saveProfileData();}};_this.userAvatar=function(user){var _user$avatar;var image=user===null||user===void 0?void 0:(_user$avatar=user.avatar)===null||_user$avatar===void 0?void 0:_user$avatar.data;if(image){image=_this.bufferToBase64(image);return\"data:image/jpeg;base64,\".concat(image);}return null;};_this.deleteMe=function(){_this.setState({deleteAccountLoading:true});_this.props.deleteAccount();_this.props.logout();};return _this;}_createClass(index,[{key:\"bufferToBase64\",value:function bufferToBase64(buffer){var binary=\"\";var bytes=new Uint8Array(buffer);var len=bytes.byteLength;for(var i=0;i<len;i++){binary+=String.fromCharCode(bytes[i]);}return window.btoa(binary);}},{key:\"componentDidMount\",value:function componentDidMount(){var token=localStorage.getItem(\"token\");var exp=localStorage.getItem(\"exp\");if(!token||+exp<Date.now()){history.push(login);}if(this.props.auth.user)this.props.setProfileData(this.props.auth.user.username,this.props.auth.user.email);}},{key:\"render\",value:function render(){var _this2=this;if(!this.props.auth.user)return\"\";var show,message,variant;if(this.props.profileData.state===\"saved\"){variant=\"success\";show=true;message=\"Profile saved successfully !\";}else if(this.props.profileData.state===\"failed\"){variant=\"danger\";show=true;message=\"Something went wrong ! Maybe user with this email already exists, try using another email.\";}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(ProfileBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-mainWrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container profile-formWrapper\",children:[/*#__PURE__*/_jsxs(Link,{to:conversations,className:\"back-to-conversation\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left-short\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Conversations\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notification\",children:/*#__PURE__*/_jsx(Alert,{show:show,variant:variant,children:/*#__PURE__*/_jsx(\"p\",{children:message})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"profile-heading\",children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,className:\"profile-form\",children:[/*#__PURE__*/_jsxs(\"picture\",{className:\"profile-form-avatar\",children:[/*#__PURE__*/_jsx(\"img\",{ref:this.profileAvatar,src:this.userAvatar(this.props.auth.user)||defaultAvatar,alt:\"user avatar\"}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"user-avatar\",type:\"file\",accept:\"image/*\",onChange:function onChange(event){return _this2.onFieldChange(event,\"avatar\");}}),\"Upload\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-form-fields\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"joined-at\",children:[\"Joined at:\",\" \",new Date(this.props.auth.user.joinedAt).toDateString()]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",required:true,value:this.props.profileData.username,onChange:function onChange(event){_this2.onFieldChange(event,\"username\");}}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,value:this.props.profileData.email,onChange:function onChange(event){return _this2.onFieldChange(event,\"email\");}}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-submitBtn\",children:this.props.profileData.state===\"saving\"?/*#__PURE__*/_jsx(\"img\",{className:\"icon-spinner\",src:spinner,alt:\"spinner icon svg\"}):\"Save\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.setDeleteAccountModal,className:\"delete-account-btn\",children:\"Delete Account\"})]})}),this.state.deleteAccountModal?/*#__PURE__*/_jsx(\"div\",{className:\"delete-account-modal-bg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"delete-account-modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete your account ?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.deleteMe,className:\"delete\",children:this.state.deleteAccountLoading?/*#__PURE__*/_jsx(\"img\",{className:\"icon-spinner\",src:spinner,alt:\"spinner icon svg\"}):\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:this.setDeleteAccountModal,className:\"cancel\",children:\"Cancel\"})]})}):null]});}}]);return index;}(Component);var mapStateToProps=function mapStateToProps(_ref){var auth=_ref.auth,profileData=_ref.profileData;return{auth:auth,profileData:profileData};};export default connect(mapStateToProps,{setProfileData:setProfileData,saveProfileData:saveProfileData,deleteAccount:deleteAccount,logout:logout})(index);","map":{"version":3,"sources":["C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/src/components/Profile/index.jsx"],"names":["React","Component","connect","Link","setProfileData","saveProfileData","deleteAccount","logout","conversations","login","ProfileBar","Alert","history","index","state","deleteAccountModal","deleteAccountLoading","profileAvatar","createRef","setDeleteAccountModal","setState","onFieldChange","event","field","profileData","props","target","value","email","username","reader","FileReader","readAsDataURL","files","onload","current","src","result","onSubmit","preventDefault","userAvatar","user","image","avatar","data","bufferToBase64","deleteMe","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","token","localStorage","getItem","exp","Date","now","push","auth","show","message","variant","defaultAvatar","joinedAt","toDateString","spinner","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport {\r\n  setProfileData,\r\n  saveProfileData,\r\n  deleteAccount,\r\n  logout,\r\n} from \"../../actions\";\r\nimport { conversations, login } from \"../../utils/Routes\";\r\nimport ProfileBar from \"../ProfileBar\";\r\nimport defaultAvatar from \"../avatar.svg\";\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport spinner from \"../spinner.svg\";\r\nimport \"./Profile.scss\";\r\nimport history from \"../../utils/history\";\r\n\r\nclass index extends Component {\r\n  state = { deleteAccountModal: false, deleteAccountLoading: false };\r\n  profileAvatar = React.createRef();\r\n\r\n  setDeleteAccountModal = () => {\r\n    this.setState({ deleteAccountModal: !this.state.deleteAccountModal });\r\n  };\r\n\r\n  onFieldChange = (event, field) => {\r\n    const { profileData } = this.props;\r\n\r\n    if (field === \"username\") {\r\n      this.props.setProfileData(event.target.value, profileData.email);\r\n    } else if (field === \"email\") {\r\n      this.props.setProfileData(profileData.username, event.target.value);\r\n    } else if (field === \"avatar\") {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onload = (event) => {\r\n        this.profileAvatar.current.src = event.target.result;\r\n      };\r\n    }\r\n  };\r\n\r\n  onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (this.props.profileData.state !== \"saving\") {\r\n      this.props.saveProfileData();\r\n    }\r\n  };\r\n\r\n  bufferToBase64(buffer) {\r\n    let binary = \"\";\r\n    let bytes = new Uint8Array(buffer);\r\n    let len = bytes.byteLength;\r\n    for (let i = 0; i < len; i++) {\r\n      binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return window.btoa(binary);\r\n  }\r\n\r\n  userAvatar = (user) => {\r\n    let image = user?.avatar?.data;\r\n    if (image) {\r\n      image = this.bufferToBase64(image);\r\n      return `data:image/jpeg;base64,${image}`;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  deleteMe = () => {\r\n    this.setState({ deleteAccountLoading: true });\r\n    this.props.deleteAccount();\r\n    this.props.logout();\r\n  };\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem(\"token\");\r\n    const exp = localStorage.getItem(\"exp\");\r\n\r\n    if (!token || +exp < Date.now()) {\r\n      history.push(login);\r\n    }\r\n\r\n    if (this.props.auth.user)\r\n      this.props.setProfileData(\r\n        this.props.auth.user.username,\r\n        this.props.auth.user.email\r\n      );\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.auth.user) return \"\";\r\n\r\n    let show, message, variant;\r\n    if (this.props.profileData.state === \"saved\") {\r\n      variant = \"success\";\r\n      show = true;\r\n      message = \"Profile saved successfully !\";\r\n    } else if (this.props.profileData.state === \"failed\") {\r\n      variant = \"danger\";\r\n      show = true;\r\n      message =\r\n        \"Something went wrong ! Maybe user with this email already exists, try using another email.\";\r\n    }\r\n\r\n    return (\r\n      <div className=\"profile\">\r\n        <ProfileBar />\r\n        <div className=\"profile-mainWrapper\">\r\n          <div className=\"container profile-formWrapper\">\r\n            <Link to={conversations} className=\"back-to-conversation\">\r\n              <i className=\"bi bi-arrow-left-short\"></i>\r\n              <span>Conversations</span>\r\n            </Link>\r\n            <div className=\"notification\">\r\n              <Alert show={show} variant={variant}>\r\n                <p>{message}</p>\r\n              </Alert>\r\n            </div>\r\n            <h3 className=\"profile-heading\">My Profile</h3>\r\n            <form onSubmit={this.onSubmit} className=\"profile-form\">\r\n              <picture className=\"profile-form-avatar\">\r\n                <img\r\n                  ref={this.profileAvatar}\r\n                  src={this.userAvatar(this.props.auth.user) || defaultAvatar}\r\n                  alt=\"user avatar\"\r\n                />\r\n                <label>\r\n                  <input\r\n                    className=\"user-avatar\"\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={(event) => this.onFieldChange(event, \"avatar\")}\r\n                  />\r\n                  Upload\r\n                </label>\r\n              </picture>\r\n              <div className=\"profile-form-fields\">\r\n                <p className=\"joined-at\">\r\n                  Joined at:{\" \"}\r\n                  {new Date(this.props.auth.user.joinedAt).toDateString()}\r\n                </p>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Username\"\r\n                  required\r\n                  value={this.props.profileData.username}\r\n                  onChange={(event) => {\r\n                    this.onFieldChange(event, \"username\");\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  required\r\n                  value={this.props.profileData.email}\r\n                  onChange={(event) => this.onFieldChange(event, \"email\")}\r\n                />\r\n                <button className=\"profile-submitBtn\">\r\n                  {this.props.profileData.state === \"saving\" ? (\r\n                    <img\r\n                      className=\"icon-spinner\"\r\n                      src={spinner}\r\n                      alt=\"spinner icon svg\"\r\n                    />\r\n                  ) : (\r\n                    \"Save\"\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n            <button\r\n              onClick={this.setDeleteAccountModal}\r\n              className=\"delete-account-btn\"\r\n            >\r\n              Delete Account\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.state.deleteAccountModal ? (\r\n          <div className=\"delete-account-modal-bg\">\r\n            <div className=\"delete-account-modal\">\r\n              <h3>Delete Account</h3>\r\n              <p>Are you sure you want to delete your account ?</p>\r\n              <button onClick={this.deleteMe} className=\"delete\">\r\n                {this.state.deleteAccountLoading ? (\r\n                  <img\r\n                    className=\"icon-spinner\"\r\n                    src={spinner}\r\n                    alt=\"spinner icon svg\"\r\n                  />\r\n                ) : (\r\n                  \"Delete\"\r\n                )}\r\n              </button>\r\n              <button onClick={this.setDeleteAccountModal} className=\"cancel\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth, profileData }) => {\r\n  return { auth, profileData };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  setProfileData,\r\n  saveProfileData,\r\n  deleteAccount,\r\n  logout,\r\n})(index);\r\n"]},"metadata":{},"sourceType":"module"}