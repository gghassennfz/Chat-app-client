{"ast":null,"code":"import _classCallCheck from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Link}from\"react-router-dom\";import{updateProfile,changePassword,login}from\"../../utils/Routes\";import{logout}from\"../../actions\";import defaultAvatar from\"../avatar.svg\";import logo from\"../logo.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var index=/*#__PURE__*/function(_Component){_inherits(index,_Component);var _super=_createSuper(index);function index(){var _this;_classCallCheck(this,index);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isOptionsActive:false};_this.setOptionsActive=function(){_this.setState({isOptionsActive:!_this.state.isOptionsActive});};_this.userAvatar=function(user){var _user$avatar;var image=user===null||user===void 0?void 0:(_user$avatar=user.avatar)===null||_user$avatar===void 0?void 0:_user$avatar.data;if(image){image=_this.bufferToBase64(image);return\"data:image/jpeg;base64,\".concat(image);}return null;};return _this;}_createClass(index,[{key:\"bufferToBase64\",value:function bufferToBase64(buffer){var binary=\"\";var bytes=new Uint8Array(buffer);var len=bytes.byteLength;for(var i=0;i<len;i++){binary+=String.fromCharCode(bytes[i]);}return window.btoa(binary);}},{key:\"render\",value:function render(){var _this$props$auth$user;return/*#__PURE__*/_jsxs(\"aside\",{className:\"profile-bar\",children:[/*#__PURE__*/_jsxs(\"picture\",{className:\"profile-bar-avatar\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:this.setOptionsActive,className:\"default-avatar\",src:this.userAvatar(this.props.auth.user)||defaultAvatar,alt:\"default avatar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"profile-bar-username\",children:((_this$props$auth$user=this.props.auth.user)===null||_this$props$auth$user===void 0?void 0:_this$props$auth$user.username)||\"\"}),this.state.isOptionsActive?/*#__PURE__*/_jsxs(\"div\",{className:\"profile-bar-options\",children:[/*#__PURE__*/_jsx(Link,{to:updateProfile,className:\"profile\",children:\"Profile\"}),/*#__PURE__*/_jsx(Link,{to:changePassword,className:\"change-password\",children:\"Change password\"}),/*#__PURE__*/_jsx(Link,{to:login,onClick:this.props.logout,className:\"logout\",children:\"Logout\"})]}):null]}),/*#__PURE__*/_jsx(\"img\",{className:\"profile-bar-logo\",src:logo,alt:\"logo\"})]});}}]);return index;}(Component);var mapStateToProps=function mapStateToProps(_ref){var auth=_ref.auth;return{auth:auth};};export default connect(mapStateToProps,{logout:logout})(index);","map":{"version":3,"sources":["C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/src/components/ProfileBar/index.jsx"],"names":["React","Component","connect","Link","updateProfile","changePassword","login","logout","logo","index","state","isOptionsActive","setOptionsActive","setState","userAvatar","user","image","avatar","data","bufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","props","auth","defaultAvatar","username","mapStateToProps"],"mappings":"4oBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,aAAT,CAAwBC,cAAxB,CAAwCC,KAAxC,KAAqD,oBAArD,CACA,OAASC,MAAT,KAAuB,eAAvB,C,yCAEA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,C,2FAEMC,CAAAA,K,uTACJC,K,CAAQ,CAAEC,eAAe,CAAE,KAAnB,C,OAERC,gB,CAAmB,UAAM,CACvB,MAAKC,QAAL,CAAc,CAAEF,eAAe,CAAE,CAAC,MAAKD,KAAL,CAAWC,eAA/B,CAAd,EACD,C,OAYDG,U,CAAa,SAACC,IAAD,CAAU,kBACrB,GAAIC,CAAAA,KAAK,CAAGD,IAAH,SAAGA,IAAH,+BAAGA,IAAI,CAAEE,MAAT,uCAAG,aAAcC,IAA1B,CACA,GAAIF,KAAJ,CAAW,CACTA,KAAK,CAAG,MAAKG,cAAL,CAAoBH,KAApB,CAAR,CACA,uCAAiCA,KAAjC,EACD,CAED,MAAO,KAAP,CACD,C,+DAlBD,wBAAeI,MAAf,CAAuB,CACrB,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,UAAJ,CAAeH,MAAf,CAAZ,CACA,GAAII,CAAAA,GAAG,CAAGF,KAAK,CAACG,UAAhB,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGF,GAApB,CAAyBE,CAAC,EAA1B,CAA8B,CAC5BL,MAAM,EAAIM,MAAM,CAACC,YAAP,CAAoBN,KAAK,CAACI,CAAD,CAAzB,CAAV,CACD,CACD,MAAOG,CAAAA,MAAM,CAACC,IAAP,CAAYT,MAAZ,CAAP,CACD,C,sBAYD,iBAAS,2BACP,mBACE,eAAO,SAAS,CAAC,aAAjB,wBACE,iBAAS,SAAS,CAAC,oBAAnB,wBACE,YACE,OAAO,CAAE,KAAKT,gBADhB,CAEE,SAAS,CAAC,gBAFZ,CAGE,GAAG,CAAE,KAAKE,UAAL,CAAgB,KAAKiB,KAAL,CAAWC,IAAX,CAAgBjB,IAAhC,GAAyCkB,aAHhD,CAIE,GAAG,CAAC,gBAJN,EADF,cAOE,UAAG,SAAS,CAAC,sBAAb,UACG,6BAAKF,KAAL,CAAWC,IAAX,CAAgBjB,IAAhB,sEAAsBmB,QAAtB,GAAkC,EADrC,EAPF,CAUG,KAAKxB,KAAL,CAAWC,eAAX,cACC,aAAK,SAAS,CAAC,qBAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAEP,aAAV,CAAyB,SAAS,CAAC,SAAnC,qBADF,cAIE,KAAC,IAAD,EAAM,EAAE,CAAEC,cAAV,CAA0B,SAAS,CAAC,iBAApC,6BAJF,cAOE,KAAC,IAAD,EAAM,EAAE,CAAEC,KAAV,CAAiB,OAAO,CAAE,KAAKyB,KAAL,CAAWxB,MAArC,CAA6C,SAAS,CAAC,QAAvD,oBAPF,GADD,CAYG,IAtBN,GADF,cAyBE,YAAK,SAAS,CAAC,kBAAf,CAAkC,GAAG,CAAEC,IAAvC,CAA6C,GAAG,CAAC,MAAjD,EAzBF,GADF,CA6BD,C,mBAzDiBP,S,EA4DpB,GAAMkC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,MAAc,IAAXH,CAAAA,IAAW,MAAXA,IAAW,CACpC,MAAO,CAAEA,IAAI,CAAJA,IAAF,CAAP,CACD,CAFD,CAIA,cAAe9B,CAAAA,OAAO,CAACiC,eAAD,CAAkB,CAAE5B,MAAM,CAANA,MAAF,CAAlB,CAAP,CAAqCE,KAArC,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { updateProfile, changePassword, login } from \"../../utils/Routes\";\r\nimport { logout } from \"../../actions\";\r\nimport defaultAvatar from \"../avatar.svg\";\r\nimport logo from \"../logo.png\";\r\n\r\nclass index extends Component {\r\n  state = { isOptionsActive: false };\r\n\r\n  setOptionsActive = () => {\r\n    this.setState({ isOptionsActive: !this.state.isOptionsActive });\r\n  };\r\n\r\n  bufferToBase64(buffer) {\r\n    let binary = \"\";\r\n    let bytes = new Uint8Array(buffer);\r\n    let len = bytes.byteLength;\r\n    for (let i = 0; i < len; i++) {\r\n      binary += String.fromCharCode(bytes[i]);\r\n    }\r\n    return window.btoa(binary);\r\n  }\r\n\r\n  userAvatar = (user) => {\r\n    let image = user?.avatar?.data;\r\n    if (image) {\r\n      image = this.bufferToBase64(image);\r\n      return `data:image/jpeg;base64,${image}`;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <aside className=\"profile-bar\">\r\n        <picture className=\"profile-bar-avatar\">\r\n          <img\r\n            onClick={this.setOptionsActive}\r\n            className=\"default-avatar\"\r\n            src={this.userAvatar(this.props.auth.user) || defaultAvatar}\r\n            alt=\"default avatar\"\r\n          />\r\n          <p className=\"profile-bar-username\">\r\n            {this.props.auth.user?.username || \"\"}\r\n          </p>\r\n          {this.state.isOptionsActive ? (\r\n            <div className=\"profile-bar-options\">\r\n              <Link to={updateProfile} className=\"profile\">\r\n                Profile\r\n              </Link>\r\n              <Link to={changePassword} className=\"change-password\">\r\n                Change password\r\n              </Link>\r\n              <Link to={login} onClick={this.props.logout} className=\"logout\">\r\n                Logout\r\n              </Link>\r\n            </div>\r\n          ) : null}\r\n        </picture>\r\n        <img className=\"profile-bar-logo\" src={logo} alt=\"logo\" />\r\n      </aside>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  return { auth };\r\n};\r\n\r\nexport default connect(mapStateToProps, { logout })(index);\r\n"]},"metadata":{},"sourceType":"module"}