{"ast":null,"code":"import _classCallCheck from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{connect}from\"react-redux\";import{withRouter}from\"react-router-dom\";import Alert from\"react-bootstrap/Alert\";import{activateAccount,setNewUserData,resendAccountActivateEmail}from\"../../actions\";import{newUserDataState}from\"../../actions/types\";import spinner from\"../spinner.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ActivateAccount=/*#__PURE__*/function(_React$Component){_inherits(ActivateAccount,_React$Component);var _super=_createSuper(ActivateAccount);function ActivateAccount(){var _this;_classCallCheck(this,ActivateAccount);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onSubmit=function(event){event.preventDefault();_this.props.resendAccountActivateEmail();};return _this;}_createClass(ActivateAccount,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.setNewUserData(true,\"\",\"\",\"\",\"\",newUserDataState.activatingAccount);this.props.activateAccount(this.props.match.params.token);}},{key:\"render\",value:function render(){var _this2=this;if(!this.props.newUserData)return\"\";if(this.props.newUserData.state===newUserDataState.activatingAccount||this.props.newUserData.state===\"accountActivated\"){return/*#__PURE__*/_jsx(\"img\",{className:\"icon-spinner-activateAccount\",src:spinner,alt:\"spinner\"});}else{var failedMessage;var failed;if(this.props.newUserData.state.startsWith(\"Invalid\")){failedMessage=this.props.newUserData.state;failed=true;}else if(this.props.newUserData.state.startsWith(\"failed\")){failedMessage=this.props.newUserData.state.split(\",\")[1];failed=true;}else{failed=false;}return/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"signup-warning\",children:/*#__PURE__*/_jsx(Alert,{show:failed,variant:\"danger\",children:/*#__PURE__*/_jsx(\"p\",{children:failedMessage})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"form__heading\",children:\"Account Activation Failed !\"}),/*#__PURE__*/_jsx(\"p\",{className:\"form__forgotPasswordDesc\",children:\"Token was invalid or expired. Enter email to get email with activation link again.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form__fieldsWrapper\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:this.props.newUserData.email,required:true,autoFocus:true,onChange:function onChange(event){return _this2.props.setNewUserData(true,\"\",event.target.value,\"\",\"\",newUserDataState.typing);}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__submitBtn\",children:this.props.newUserData.state===newUserDataState.resubmitting?/*#__PURE__*/_jsx(\"img\",{className:\"icon-spinner\",src:spinner,alt:\"spinner icon svg\"}):\"Resend email\"})]});}}}]);return ActivateAccount;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{newUserData:state.newUserData};};export default withRouter(connect(mapStateToProps,{activateAccount:activateAccount,setNewUserData:setNewUserData,resendAccountActivateEmail:resendAccountActivateEmail})(ActivateAccount));","map":{"version":3,"sources":["C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/src/components/AuthComponent/ActivateAccount.jsx"],"names":["React","connect","withRouter","Alert","activateAccount","setNewUserData","resendAccountActivateEmail","newUserDataState","ActivateAccount","onSubmit","event","preventDefault","props","activatingAccount","match","params","token","newUserData","state","spinner","failedMessage","failed","startsWith","split","email","target","value","typing","resubmitting","Component","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport {\r\n  activateAccount,\r\n  setNewUserData,\r\n  resendAccountActivateEmail,\r\n} from \"../../actions\";\r\nimport { newUserDataState } from \"../../actions/types\";\r\nimport spinner from \"../spinner.svg\";\r\n\r\nclass ActivateAccount extends React.Component {\r\n  onSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.resendAccountActivateEmail();\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.setNewUserData(\r\n      true,\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      \"\",\r\n      newUserDataState.activatingAccount\r\n    );\r\n    this.props.activateAccount(this.props.match.params.token);\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.newUserData) return \"\";\r\n\r\n    if (\r\n      this.props.newUserData.state === newUserDataState.activatingAccount ||\r\n      this.props.newUserData.state === \"accountActivated\"\r\n    ) {\r\n      return (\r\n        <img\r\n          className=\"icon-spinner-activateAccount\"\r\n          src={spinner}\r\n          alt=\"spinner\"\r\n        />\r\n      );\r\n    } else {\r\n      let failedMessage;\r\n      let failed;\r\n      if (this.props.newUserData.state.startsWith(\"Invalid\")) {\r\n        failedMessage = this.props.newUserData.state;\r\n        failed = true;\r\n      } else if (this.props.newUserData.state.startsWith(\"failed\")) {\r\n        failedMessage = this.props.newUserData.state.split(\",\")[1];\r\n        failed = true;\r\n      } else {\r\n        failed = false;\r\n      }\r\n\r\n      return (\r\n        <form className=\"form\" onSubmit={this.onSubmit}>\r\n          <div className=\"signup-warning\">\r\n            <Alert show={failed} variant=\"danger\">\r\n              <p>{failedMessage}</p>\r\n            </Alert>\r\n          </div>\r\n          <h2 className=\"form__heading\">Account Activation Failed !</h2>\r\n\r\n          <p className=\"form__forgotPasswordDesc\">\r\n            Token was invalid or expired. Enter email to get email with\r\n            activation link again.\r\n          </p>\r\n\r\n          <div className=\"form__fieldsWrapper\">\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              value={this.props.newUserData.email}\r\n              required\r\n              autoFocus\r\n              onChange={(event) =>\r\n                this.props.setNewUserData(\r\n                  true,\r\n                  \"\",\r\n                  event.target.value,\r\n                  \"\",\r\n                  \"\",\r\n                  newUserDataState.typing\r\n                )\r\n              }\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"form__submitBtn\">\r\n            {this.props.newUserData.state === newUserDataState.resubmitting ? (\r\n              <img\r\n                className=\"icon-spinner\"\r\n                src={spinner}\r\n                alt=\"spinner icon svg\"\r\n              />\r\n            ) : (\r\n              \"Resend email\"\r\n            )}\r\n          </button>\r\n        </form>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { newUserData: state.newUserData };\r\n};\r\n\r\nexport default withRouter(\r\n  connect(mapStateToProps, {\r\n    activateAccount,\r\n    setNewUserData,\r\n    resendAccountActivateEmail,\r\n  })(ActivateAccount)\r\n);\r\n"]},"metadata":{},"sourceType":"module"}