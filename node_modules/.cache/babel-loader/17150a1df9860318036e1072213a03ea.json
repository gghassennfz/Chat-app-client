{"ast":null,"code":"import _classCallCheck from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{setChangePasswordData,saveNewPassword}from\"../../actions\";import ProfileBar from\"../ProfileBar\";import Alert from\"react-bootstrap/Alert\";import spinner from\"../spinner.svg\";import{conversations,login}from\"../../utils/Routes\";import history from\"../../utils/history\";import\"./ChangePassword.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var index=/*#__PURE__*/function(_Component){_inherits(index,_Component);var _super=_createSuper(index);function index(){var _this;_classCallCheck(this,index);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onFieldChange=function(event,field){var changePassword=_this.props.changePassword;if(field===\"current\"){_this.props.setChangePasswordData(event.target.value,changePassword.newPassword,changePassword.confirmPassword);}else if(field===\"new\"){_this.props.setChangePasswordData(changePassword.currentPassword,event.target.value,changePassword.confirmPassword);}else if(field===\"confirm\"){_this.props.setChangePasswordData(changePassword.currentPassword,changePassword.newPassword,event.target.value);}};_this.onSubmit=function(event){event.preventDefault();_this.props.saveNewPassword();};return _this;}_createClass(index,[{key:\"componentDidMount\",value:function componentDidMount(){var token=localStorage.getItem(\"token\");var exp=localStorage.getItem(\"exp\");if(!token||+exp<Date.now()){history.push(login);}}},{key:\"render\",value:function render(){var _this$props$changePas,_this2=this;var show,variant,message;if((_this$props$changePas=this.props.changePassword.state)===null||_this$props$changePas===void 0?void 0:_this$props$changePas.startsWith(\"validation\")){show=true;variant=\"danger\";message=this.props.changePassword.state.split(\",\")[1];}else if(this.props.changePassword.state===\"saved\"){show=true;variant=\"success\";message=\"Password changed successfully !\";}else if(this.props.changePassword.state===\"failed\"){show=true;variant=\"danger\";message=\"Something went wrong ! May be current password is wrong.\";}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(ProfileBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-mainWrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container profile-formWrapper\",children:[/*#__PURE__*/_jsxs(Link,{to:conversations,className:\"back-to-conversation\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-arrow-left-short\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Conversations\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notification\",children:/*#__PURE__*/_jsx(Alert,{show:show,variant:variant,children:/*#__PURE__*/_jsx(\"p\",{children:message})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"profile-heading\",children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmit,className:\"changePassword-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Current Password\",required:true,value:this.props.changePassword.currentPassword,onChange:function onChange(event){_this2.onFieldChange(event,\"current\");}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"New Password\",required:true,value:this.props.changePassword.newPassword,onChange:function onChange(event){return _this2.onFieldChange(event,\"new\");}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Confirm Password\",required:true,value:this.props.changePassword.confirmPassword,onChange:function onChange(event){return _this2.onFieldChange(event,\"confirm\");}}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-submitBtn\",children:this.props.changePassword.state===\"saving\"?/*#__PURE__*/_jsx(\"img\",{className:\"icon-spinner\",src:spinner,alt:\"spinner icon svg\"}):\"Save\"})]})]})})]});}}]);return index;}(Component);var mapStateToProps=function mapStateToProps(_ref){var changePassword=_ref.changePassword,auth=_ref.auth;return{changePassword:changePassword,auth:auth};};export default connect(mapStateToProps,{setChangePasswordData:setChangePasswordData,saveNewPassword:saveNewPassword})(index);","map":{"version":3,"sources":["C:/Users/Ghassen/Desktop/lyoum/3/chat-app-client/src/components/ChangePassword/index.jsx"],"names":["React","Component","Link","connect","setChangePasswordData","saveNewPassword","ProfileBar","Alert","conversations","login","history","index","onFieldChange","event","field","changePassword","props","target","value","newPassword","confirmPassword","currentPassword","onSubmit","preventDefault","token","localStorage","getItem","exp","Date","now","push","show","variant","message","state","startsWith","split","spinner","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { setChangePasswordData, saveNewPassword } from \"../../actions\";\r\nimport ProfileBar from \"../ProfileBar\";\r\nimport Alert from \"react-bootstrap/Alert\";\r\nimport spinner from \"../spinner.svg\";\r\nimport { conversations, login } from \"../../utils/Routes\";\r\nimport history from \"../../utils/history\";\r\nimport \"./ChangePassword.scss\";\r\n\r\nclass index extends Component {\r\n  onFieldChange = (event, field) => {\r\n    const { changePassword } = this.props;\r\n    if (field === \"current\") {\r\n      this.props.setChangePasswordData(\r\n        event.target.value,\r\n        changePassword.newPassword,\r\n        changePassword.confirmPassword\r\n      );\r\n    } else if (field === \"new\") {\r\n      this.props.setChangePasswordData(\r\n        changePassword.currentPassword,\r\n        event.target.value,\r\n        changePassword.confirmPassword\r\n      );\r\n    } else if (field === \"confirm\") {\r\n      this.props.setChangePasswordData(\r\n        changePassword.currentPassword,\r\n        changePassword.newPassword,\r\n        event.target.value\r\n      );\r\n    }\r\n  };\r\n\r\n  onSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    this.props.saveNewPassword();\r\n  };\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem(\"token\");\r\n    const exp = localStorage.getItem(\"exp\");\r\n\r\n    if (!token || +exp < Date.now()) {\r\n      history.push(login);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let show, variant, message;\r\n    if (this.props.changePassword.state?.startsWith(\"validation\")) {\r\n      show = true;\r\n      variant = \"danger\";\r\n      message = this.props.changePassword.state.split(\",\")[1];\r\n    } else if (this.props.changePassword.state === \"saved\") {\r\n      show = true;\r\n      variant = \"success\";\r\n      message = \"Password changed successfully !\";\r\n    } else if (this.props.changePassword.state === \"failed\") {\r\n      show = true;\r\n      variant = \"danger\";\r\n      message = \"Something went wrong ! May be current password is wrong.\";\r\n    }\r\n\r\n    return (\r\n      <div className=\"profile\">\r\n        <ProfileBar />\r\n        <div className=\"profile-mainWrapper\">\r\n          <div className=\"container profile-formWrapper\">\r\n            <Link to={conversations} className=\"back-to-conversation\">\r\n              <i className=\"bi bi-arrow-left-short\"></i>\r\n              <span>Conversations</span>\r\n            </Link>\r\n            <div className=\"notification\">\r\n              <Alert show={show} variant={variant}>\r\n                <p>{message}</p>\r\n              </Alert>\r\n            </div>\r\n            <h3 className=\"profile-heading\">Change Password</h3>\r\n            <form onSubmit={this.onSubmit} className=\"changePassword-form\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Current Password\"\r\n                required\r\n                value={this.props.changePassword.currentPassword}\r\n                onChange={(event) => {\r\n                  this.onFieldChange(event, \"current\");\r\n                }}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"New Password\"\r\n                required\r\n                value={this.props.changePassword.newPassword}\r\n                onChange={(event) => this.onFieldChange(event, \"new\")}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Confirm Password\"\r\n                required\r\n                value={this.props.changePassword.confirmPassword}\r\n                onChange={(event) => this.onFieldChange(event, \"confirm\")}\r\n              />\r\n              <button className=\"profile-submitBtn\">\r\n                {this.props.changePassword.state === \"saving\" ? (\r\n                  <img\r\n                    className=\"icon-spinner\"\r\n                    src={spinner}\r\n                    alt=\"spinner icon svg\"\r\n                  />\r\n                ) : (\r\n                  \"Save\"\r\n                )}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ changePassword, auth }) => {\r\n  return { changePassword, auth };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  setChangePasswordData,\r\n  saveNewPassword,\r\n})(index);\r\n"]},"metadata":{},"sourceType":"module"}